title: 为什么C++是糟糕的？因为需要停止的不仅仅是GOTO而已
date: 2010-06-24 09:42:57
---

    这个世界上为什么会出现c++？因为c语言虽然直到现在依然有活力，但是在应用程序发展的大潮中，c的开发速度太慢了！而且也会产生“糟糕的耦合”。当然c++不是第一个“面向对象”语言，但是无疑是现在依然有活力的语言中，最早的一个。

    为什么C++很糟糕，有几个致命伤：1、C++为了完全兼容C语言，做出了很大的牺牲；2、C++有些古老，里面各种编程形式和方法太多了，更容易产生误解；3、C++拥有一个相对庞大，也相对复杂的STL，而且还不够用！我们有时候还要用一个更为庞大，更为复杂的Boost！

    第一点。C++自然有自己的特性，但是保留了C的特性，这就让程序在接口上，在实现上会有各种方法，更容易养成“糟糕的程序员”和更差的“团队配合”。比如说有一个人认为接口应该是用指针传递数据，另一个人想要用引用值传送数据，何如？还比如说指针的滥用，在c++中，所谓的指针，应该是尽量少用，几乎不用的。但是C语言程序的思想，和某些教导并没有严正声明这一点。

    第二点。C++很古老了，从多重继承特性上就能看出来。为什么现代语言，如java，.net，python，他们都是后起之秀，但是却没有C++的“多重继承”特性呢？因为在后来，人们切实的发现，多重继承是没用的。不能说完全没用，而是说可能带来很糟糕的设计，弊大于利。还有，比如说循环，在C语言里面很简单，比如循环一个数组我们就写：

	for(i=0;i<n;i++) a[i]???

	但是C++里面可以用for_each阿，那么究竟用不用for_each呢？一般来说是这样的，如果这个循环会在很多地方重复，并且需要对不同类型作相同的操作的时候，用for_each。因为使用模板重用就可以不在乎类型的重用，也很方便。可是这种设计是比较复杂的，也存在着理解上和接口的问题，我认为这也很容易有“糟糕的程序员”。

	第三点。STL的复杂。上面提到的for_each就是STL的一部分，使用起来必须还要理解很多概念，比如iterator，还要区分不同的iterator，对于排序还需要有不同容器的不同的iterator的区别等等。但是STL依然有非常多非常好的容器，如果加上BOOST就几乎用了所有常见的数据结构和容器，外加各种不同的排序方法，常见的部分呢算法。BOOST中还有各种数学，网络，图形计算，矩阵的库，这使得C++的工具基础很完善。如果是C语言的话，具体使用什么库，什么数据结构，是自己实现还是怎么样，就要有很多说道了。但是问题也在其中，就是STL和BOOST并不容易掌握，更需要的是一种观念的转换。

	Linus的看法主要在“C++拥有很多不必要的东西”而“缺少一些更高级的东西”，最终导致了“C++很容易出现垃圾的程序员写出的垃圾的代码”。虽然C++正在添加GC和一些高级的概念，但是也是双刃剑，单不说为C++这个史前猛犸象添加这些东西需要多费劲，而且添加上以后，也可能会让C++更加复杂，比如说你到底用不用GC？虽然这样，但是也不能完全否定C++的价值，C++庞大，复杂，但依然有其魅力所在的，其中简单的模板，全面的工具，这些是无法改变的。具体情况具体分析，毕竟程序员都是全才，也没必要拘泥于一种语言的优劣。