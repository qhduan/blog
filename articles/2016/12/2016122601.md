title: 最近在做的事情
type: post
date: 2016-12-26 04:43:04
category: 
---

本来想做一个我理解中的语义编辑器，结果一周时间还进度频频。这件事儿如果从0开始做，那么基本上算是超出我能力了。虽然编辑语言解析不一定要图灵完备的，但是从头写一份这东西完全没意义。

考虑的语言是html或者markdown，前者有以tinymice和medium editor为代表的美观成熟的编辑器。后者以marked和markdown-it代表的parser外加codemirror和ace代表的editor。html是一个语义足够的语言，但是html是人不能手工编辑源代码的，为什么，因为你考虑过每写一个换行都要写一个<br>的感觉吗，这是不可能的。markdown的好处是可以直接编辑源代码。

但是markdown的缺点是它的语法太过简单，例如里面是没有闭合标签的概念的，也就是标签之间几乎不能嵌套，这也是我一直纠结的地方。例如html可以很方便的确定标签嵌套，因为open tag和close tag是不同的（后者有斜 /）。但是markdown的精简语法让它的标签的open tag和close tag都是相同的（例如代码标签```）。如果不考虑嵌套，这件事儿其实挺简单的。

在我的粗鄙理解中，semantic editor需要做到的最重要的事情就是能把一切很方便的贴上标签，并且任何地方都可查询。在我的理解中，它的终极目的是semantic database，其中的数据完全没有格式，任何一个文档甚至可以除了一个uuid，一个created at，一个updated at以外可以没有任何其他预设标签。而查询的语言和处理语言，我假想预设的是sql和js。

编辑器整个只要需要两个标签，一个对应[[]]一个对应{{}}，然后再markdown外面外套一层的时候就有很多细节……你可以想想marked那个千行代码被反复在github上修改了好几年好几年好几年……然后还在修改，即便如此修改作者都没敢加入latex支持……