title: 关于c++头文件后缀名和main的返回值再谈
date: 2012-02-09 17:11:40
---

<code>#include &lt; iostream &gt;

#include &lt; iostream.h &gt;
using namespace std;</code>
<code>void main()
int main()</code>
在c++98标准以前（就是国际标准化组织1998年制定的标准），c++的头文件不够规范，采用的是.h的有后缀名形式。不过在这个标准推出以后，标准规定了头文件统一改为无后缀名形式，并且头文件内容包含在一个名为std的命名空间里。因为这是新的标准所规定的，自然也是建议采用的形式。（说是新标准其实也十几年了）

国内作者的书经常发现各种例子中使用了两种格式或者只使用了老版本的形式，说明这个书的作者是混蛋，这书肯定不是一个人写的，一个人不可能写得出两种代码风格，而且也应该使用新版头文件的标准。这一点在看一些国外作者的书就能看出来，例如《c++ primer》都是很规范、统一的，国内作者的书嘛⋯⋯尽量少看国内作者写的书，误人子弟的货。

至于main的返回值的问题，这又是一群国内混蛋问题，实际上包括最经典的那本出版于70年代的《c programming language》，也就是C语言的创始人的那本书，就没有main的返回值是void的形式。那个时候c语言喜欢把main写成无返回值，因为c语言规定一个函数如果无返回值类型，那么返回值类型默认为int。而C++后来规范了C语言，不允许一个函数无返回值（除了构造函数和析构函数），如此之后有些家伙就非要写一个void的返回值类型，实际上这是极其不标准的。

在很多编译器上，例如gcc，intel c，如果你把main写成void的返回值，会直接报错拒绝编译。为什么这也是有典故的，因为从unix系统开始，程序就规定应该有一个返回值。这个返回值可以代表程序是否运行成功，假设返回0就代表程序运行成功无错，返回其他值代表程序运行出现问题，而返回的数值是问题的错误代码。这是一个古老的习俗，在unix/linux下可以用echo $?命令查看上一个运行的程序的返回值。在Windows下甚至有一个名字为EXIT_SUCESS的宏，值为0，你在部分程序可以看到main函数的最后是return EXIT_SUCESS;代表程序运行成功。所以为了这个习俗，也应该避免void返回值的main函数的出现。
